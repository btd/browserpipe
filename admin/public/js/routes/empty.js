// Generated by CoffeeScript 1.6.3
(function() {
  define(["smog/server", "smog/notify", "templates/confirm"], function(server, notify, templ) {
    return {
      show: function(_arg) {
        var name;
        name = _arg.name;
        $('#content').append(templ({
          title: 'Empty',
          text: 'Emptying a collection will remove every document it contains.\nYou will not be able to recover any data lost.'
        }));
        $('#confirm-modal').modal();
        $('#confirm-modal').on('hidden', function() {
          return $('#confirm-modal').remove();
        });
        return $('#confirm-button').click(function() {
          return server.collection({
            collection: name,
            type: 'empty'
          }, function(err) {
            if (err != null) {
              return notify.error("Error emptying collection: " + (err.err || err));
            }
            $('#confirm-modal').modal('hide');
            notify.success("Collection emptied");
            return window.location.hash = "#/collection/" + name;
          });
        });
      }
    };
  });

}).call(this);
