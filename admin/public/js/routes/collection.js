// Generated by CoffeeScript 1.6.3
(function() {
  define(["smog/server", "smog/util", "smog/notify", "templates/collection", "templates/editbar"], function(server, util, notify, templ, editbar) {
    return {
      show: function(_arg) {
        var name;
        name = _arg.name;
        return server.collection({
          collection: name,
          type: 'find',
          query: "{}",
          options: {
            limit: 1000
          }
        }, function(err, docs) {
          if (err != null) {
            window.location.hash = '/';
            return notify.error("Error retrieving documents: " + (err.err || err));
          }
          if (docs.length >= 999) {
            notify.alert("Document limit reached - only displaying first 1000");
          }
          $('#content').html(templ({
            name: name,
            documents: util.filterDocuments(docs)
          }));
          $('#editbar').html(editbar({
            name: name
          }));
          return $('.dataPreview').click(function() {
            return $(this).toggleClass("crop");
          });
        });
      }
    };
  });

}).call(this);
