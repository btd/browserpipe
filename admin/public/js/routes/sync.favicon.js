// Generated by CoffeeScript 1.6.3
(function() {
  define(["smog/server", "smog/notify", "templates/confirm"], function(server, notify, templ) {
    return {
      show: function(_arg) {
        var id;
        id = _arg.id;
        $('#content').append(templ({
          title: 'Sync Favicon',
          text: 'Do you want to sync user' + id  + ' ?'
        }));
        $('#confirm-modal').modal();
        $('#confirm-modal').on('hidden', function() {
          return $('#confirm-modal').remove();
        });
        return $('#confirm-button').click(function() {
          return server.sync({
            userId: id,
            type: 'syncFaviconForUSer'
          }, function(err) {
            if (err != null) {
              return notify.error("Error syncing favicons for user: " + (err.err || err));
            }
            $('#confirm-modal').modal('hide');
            notify.success("Synced user with id " + id);
            return window.location.hash = "#/sync";
          });
        });
      }
    };
  });

}).call(this);
