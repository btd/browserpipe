// Generated by CoffeeScript 1.6.3
(function() {
  define(["smog/server", "smog/util", "smog/notify", "templates/sync"], function(server, util, notify, templ) {
    return {
      show: function() {
        return server.sync({
          type: 'syncinfo',
          query: "{}",
          options: {
            limit: 1000
          }
        }, function(err, users) {
          if (err != null) {
            window.location.hash = '/';
            return notify.error("Error retrieving documents: " + (err.err || err));
          }
          if (users.length >= 999) {
            notify.alert("Document limit reached - only displaying first 1000");
          }
          $('#content').html(templ({
            itemCount: 12,
            noScreenshotCount: 13,
            noFaviconCount: 222,
            users: users
          }));
          return;
        });
      }
    };
  });

}).call(this);
