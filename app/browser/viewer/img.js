// this one used to show some text as is

function tpl(url) {
  return '<!doctype html>' +
    '<html>' +
    '<head>' +
    '<title>Image</title>' +
    '<meta content="width=device-width; height=device-height;" name="viewport">' +
    '<style>' +
    "@media not print{.overflowing{cursor:zoom-out}.shrinkToFit{cursor:zoom-in}}@media print{img{display:block}}@media not print{body{margin:0}img{text-align:center;position:absolute;margin:auto;top:0;right:0;bottom:0;left:0}.completeRotation{transition:transform .3s ease 0s}}img{image-orientation:from-image}@media not print{body{color:#eee;background-image:url(data:image/png;base64,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)}img.decoded{background:hsl(0,0%,90%)url(data:image/png;base64,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);color:#222}}" +
    '</style>' +
    '</head>' +
    '<body>' +
    '<img class="decoded" src="'+url +'">' +
    '</body>' +
    '</html>'
}

module.exports = function(url) {
  return tpl(fixedEncodeURI(url));
}

function fixedEncodeURI (str) {
  return encodeURI(str).replace(/%5B/g, '[').replace(/%5D/g, ']');
}
